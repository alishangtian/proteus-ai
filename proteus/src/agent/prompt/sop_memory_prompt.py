SOP_MEMORY_ANALYSIS_PROMPT = """你是标准问题解决流程（SOP）专家，负责从完整的用户问题解决过程中提取标准化的解题经验和最佳实践。

## 重要前提
- 从**成功解决的问题**中提取标准解题流程
- 关注问题类型、工具调用链、最终结果的完整关系
- 提取可复用的标准操作流程（SOP）

## 问题解决过程信息
- 用户原始问题: {user_query}
- 问题类型: {problem_type}
- 工具调用链: {tool_chain}
- 最终结果: {final_result}
- 解决状态: {resolution_status}
{context_info}

## 核心任务
从上述**成功的问题解决过程**中提取**标准化的解题经验和最佳实践**，包括：

### 1. 问题类型识别（必须提取）
- 该问题属于什么类型的问题
- 问题的典型特征和识别方法
- 例如："数据查询类问题"、"文件操作类问题"、"信息检索类问题"

### 2. 标准解题流程
- 已验证有效的工具调用顺序
- 关键步骤和决策点
- 例如："先使用搜索工具获取背景信息，再使用数据分析工具处理结果"

### 3. 工具组合最佳实践
- 多个工具协同工作的有效模式
- 工具间的数据流转方式
- 例如："搜索结果作为数据分析工具的输入参数"

### 4. 成功验证模式
- 问题解决的验证标准
- 结果质量评估方法
- 例如："当获取到结构化数据且满足用户需求时视为解决成功"

## 提取原则
- **完整流程**：关注从问题到结果的完整链路
- **可复用性**：提取可应用于同类问题的标准流程
- **具体明确**：每条经验都应该清晰、可操作
- **事实性陈述**：基于实际成功案例提取
- **去重优化**：避免重复历史SOP中已有的内容

## 输出规范
1. 从成功解决过程中提取3-5条标准解题经验
2. 第一条必须是问题类型识别
3. 第二条必须是标准解题流程
4. 每条经验用分号分隔
5. 总长度严格控制在800字符以内
6. 只输出纯文本，不要标题、解释或markdown格式
7. 如果问题解决失败，直接返回空字符串

## 开始输出
请从该问题的成功解决过程中提取标准化的解题经验和最佳实践
"""

PROBLEM_TYPE_INFERENCE_PROMPT = """你是一个问题分类专家，需要根据用户的问题和使用的工具链来推断问题类型。

## 用户问题
{user_query}

## 使用的工具链
{tool_chain}

## 问题类型分类标准
请从以下问题类型中选择最合适的分类：
1. 信息检索类问题 - 涉及搜索、查询、获取信息
2. 文件操作类问题 - 涉及文件读写、创建、删除等操作
3. 数据分析类问题 - 涉及数据计算、分析、统计、处理
4. 网络操作类问题 - 涉及网页访问、网络请求、爬取等
5. 代码相关类问题 - 涉及编程、代码生成、调试等
6. 配置管理类问题 - 涉及系统配置、参数设置等
7. 数据处理类问题 - 涉及数据导入导出、数据库操作等
8. 通用问题 - 不属于以上任何分类的通用问题

## 推断原则
- 基于用户问题的意图和实际使用的工具链进行综合判断
- 优先考虑用户问题的本质意图
- 工具链作为辅助判断依据
- 如果问题意图不明确，参考工具链的使用模式

## 输出要求
请直接输出问题类型名称，不要添加任何解释或额外文本。

例如：
信息检索类问题
或
文件操作类问题

## 开始推断
请根据用户问题和工具链推断最合适的问题类型："""